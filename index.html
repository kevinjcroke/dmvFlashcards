<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMV Flashcards</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>DMV Practice Test</h1>
            
            <div class="audio-section">
                <details class="audio-player-container">
                    <summary class="audio-toggle">
                        üéß Listen to Rules of the Road Audio Guide
                    </summary>
                    <div class="audio-content">
                        <p>Listen while you practice! This audio guide covers the rules of the road.</p>
                        <iframe src="https://drive.google.com/file/d/13OB7s-GylwgBVCphU9id1P-_mp-UDFT7/preview" width="100%" height="80" allow="autoplay" class="audio-iframe"></iframe>
                    </div>
                </details>
            </div>
            
            <div class="stats">
                <div class="stat">
                    <span class="stat-label">Questions Remaining:</span>
                    <span id="questions-remaining">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Correct:</span>
                    <span id="correct-count">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Incorrect:</span>
                    <span id="incorrect-count">0</span>
                </div>
            </div>
        </header>

        <main>
            <div id="welcome-screen" class="screen active">
                <div class="welcome-card">
                    <h2>Welcome to DMV Flashcards!</h2>
                    <p>I built this app when my son wanted flashcards to study for his Missouri permit test instead of reading the full driver's guide. Questions are presented randomly and out of order to help with retention.</p>
                    <p><strong>How mastery works:</strong> Each question needs to be answered correctly at least 2 more times than incorrectly to be considered "mastered." Once mastered, questions won't appear again, helping you focus on areas that need more practice.</p>
                    <button id="start-studying" class="btn primary">Start Studying</button>
                </div>
            </div>

            <div id="loading-screen" class="screen">
                <h2>Loading Questions...</h2>
                <p>Please wait while we load your flashcards.</p>
            </div>

            <div id="error-screen" class="screen">
                <div class="error-card">
                    <h2>‚ö†Ô∏è Cannot Load Questions</h2>
                    <p id="error-message">Error loading flashcards.json</p>
                    <div class="error-instructions">
                        <h3>To fix this issue:</h3>
                        <ol>
                            <li>You need to run this app from a local web server, not by opening the HTML file directly</li>
                            <li><strong>Easy solution:</strong> Use Python to start a simple server:</li>
                        </ol>
                        <div class="code-block">
                            <code>python -m http.server 8000</code>
                        </div>
                        <p>Then open: <strong>http://localhost:8000</strong></p>
                    </div>
                    <button id="try-sample" class="btn primary">Use Sample Questions Instead</button>
                </div>
            </div>

            <div id="question-screen" class="screen">
                <div class="question-card">
                    <div class="question-number">Question <span id="current-question-id"></span></div>
                    <div class="question-text" id="question-text"></div>
                    <div class="options" id="options"></div>
                    
                    <div id="inline-result" class="inline-result" style="display: none;">
                        <div id="inline-result-status" class="result-status"></div>
                        <div id="inline-result-explanation" class="explanation"></div>
                        <div class="question-stats">
                            <span>This question: </span>
                            <span id="inline-question-score"></span>
                        </div>
                        <button id="next-question" class="btn primary" style="display: none;">Next Question</button>
                    </div>
                </div>
            </div>

            <div id="result-screen" class="screen">
                <div class="result-card">
                    <div id="result-status" class="result-status"></div>
                    <div id="result-explanation" class="explanation"></div>
                    <div class="question-stats">
                        <span>This question: </span>
                        <span id="question-score-display"></span>
                    </div>
                    <button id="next-question" class="btn primary">Next Question</button>
                </div>
            </div>

            <div id="complete-screen" class="screen">
                <div class="complete-card">
                    <h2>üéâ Congratulations!</h2>
                    <p>You've mastered all the questions!</p>
                    <div class="final-stats">
                        <div>Total Correct: <span id="final-correct"></span></div>
                        <div>Total Incorrect: <span id="final-incorrect"></span></div>
                        <div>Accuracy: <span id="final-accuracy"></span>%</div>
                    </div>
                    <button id="restart" class="btn primary">Start Over</button>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>